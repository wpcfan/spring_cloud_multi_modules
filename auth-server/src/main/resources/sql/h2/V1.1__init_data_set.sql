SET REFERENTIAL_INTEGRITY FALSE;

-- 初始化权限
INSERT INTO "UAA_PERMISSIONS" ("ID", "DISPLAY_NAME", "PERMISSION_NAME") VALUES (1, 'Create User', 'USER_CREATE');
INSERT INTO "UAA_PERMISSIONS" ("ID", "DISPLAY_NAME", "PERMISSION_NAME") VALUES (2, 'Update User', 'USER_UPDATE');
INSERT INTO "UAA_PERMISSIONS" ("ID", "DISPLAY_NAME", "PERMISSION_NAME") VALUES (3, 'Read User', 'USER_READ');
INSERT INTO "UAA_PERMISSIONS" ("ID", "DISPLAY_NAME", "PERMISSION_NAME") VALUES (4, 'Delete User', 'USER_DELETE');
INSERT INTO "UAA_PERMISSIONS" ("ID", "DISPLAY_NAME", "PERMISSION_NAME") VALUES (5, 'Create Client', 'CLIENT_CREATE');
INSERT INTO "UAA_PERMISSIONS" ("ID", "DISPLAY_NAME", "PERMISSION_NAME") VALUES (6, 'Update Client', 'CLIENT_UPDATE');
INSERT INTO "UAA_PERMISSIONS" ("ID", "DISPLAY_NAME", "PERMISSION_NAME") VALUES (7, 'Read Client', 'CLIENT_READ');
INSERT INTO "UAA_PERMISSIONS" ("ID", "DISPLAY_NAME", "PERMISSION_NAME") VALUES (8, 'Delete Client', 'CLIENT_DELETE');

-- 初始化角色
INSERT INTO "UAA_ROLES" ("ID", "BUILT_IN", "DISPLAY_NAME", "ROLE_NAME") VALUES (1, TRUE, 'Administrator', 'ROLE_ADMIN');
INSERT INTO "UAA_ROLES" ("ID", "BUILT_IN", "DISPLAY_NAME", "ROLE_NAME") VALUES (2, FALSE, 'Employee', 'ROLE_EMPLOYEE');

-- 角色与权限的映射
INSERT INTO "UAA_ROLES_PERMISSIONS" ("ROLE_ID", "PERMISSION_ID") VALUES (1, 1); -- ROLE_ADMIN -> USER_CREATE
INSERT INTO "UAA_ROLES_PERMISSIONS" ("ROLE_ID", "PERMISSION_ID") VALUES (1, 2); -- ROLE_ADMIN -> USER_UPDATE
INSERT INTO "UAA_ROLES_PERMISSIONS" ("ROLE_ID", "PERMISSION_ID") VALUES (1, 3); -- ROLE_ADMIN -> USER_READ
INSERT INTO "UAA_ROLES_PERMISSIONS" ("ROLE_ID", "PERMISSION_ID") VALUES (1, 4); -- ROLE_ADMIN -> USER_DELETE
INSERT INTO "UAA_ROLES_PERMISSIONS" ("ROLE_ID", "PERMISSION_ID") VALUES (1, 5); -- ROLE_ADMIN -> CLIENT_CREATE
INSERT INTO "UAA_ROLES_PERMISSIONS" ("ROLE_ID", "PERMISSION_ID") VALUES (1, 6); -- ROLE_ADMIN -> CLIENT_UPDATE
INSERT INTO "UAA_ROLES_PERMISSIONS" ("ROLE_ID", "PERMISSION_ID") VALUES (1, 7); -- ROLE_ADMIN -> CLIENT_READ
INSERT INTO "UAA_ROLES_PERMISSIONS" ("ROLE_ID", "PERMISSION_ID") VALUES (1, 8); -- ROLE_ADMIN -> CLIENT_DELETE

INSERT INTO "UAA_ROLES_PERMISSIONS" ("ROLE_ID", "PERMISSION_ID") VALUES (2, 3); -- ROLE_EMPLOYEE -> USER_READ
INSERT INTO "UAA_ROLES_PERMISSIONS" ("ROLE_ID", "PERMISSION_ID") VALUES (2, 7); -- ROLE_EMPLOYEE -> CLIENT_READ

-- 初始化用户组
INSERT INTO "UAA_GROUPS" ("ID", "GROUP_NAME", "DISPLAY_NAME") VALUES (1, 'Admin Group', '管理员组');
INSERT INTO "UAA_GROUPS" ("ID", "GROUP_NAME", "DISPLAY_NAME") VALUES (2, 'Employee Group', '员工组');

-- 用户组与角色的映射
INSERT INTO "UAA_GROUPS_ROLES" ("GROUP_ID", "ROLE_ID") VALUES (1, 1); -- Admin Group -> ROLE_ADMIN
INSERT INTO "UAA_GROUPS_ROLES" ("GROUP_ID", "ROLE_ID") VALUES (2, 2); -- Employee Group -> ROLE_EMPLOYEE

-- 初始化用户
INSERT INTO "UAA_USERS" ("ID", "USERNAME", "PASSWORD_HASH", "ACCOUNT_NON_EXPIRED", "ACCOUNT_NON_LOCKED", "CREDENTIALS_NON_EXPIRED", "ENABLED", "MFA_ENABLED")
VALUES (1, 'admin', '$2b$12$7gisoPsmg7orHvSfJX.53.DRDwJL0UHNh76lhYUpmutGA4rg0hkai', TRUE, TRUE, TRUE, TRUE, FALSE);
INSERT INTO "UAA_USERS" ("ID", "USERNAME", "PASSWORD_HASH", "ACCOUNT_NON_EXPIRED", "ACCOUNT_NON_LOCKED", "CREDENTIALS_NON_EXPIRED", "ENABLED", "MFA_ENABLED")
VALUES (2, 'user', '$2b$12$yO6y2Eqy1VQgjeju2/NQ4.5auJJEMB1Iqwq3nxcU01ZrdOpQWzvPG', TRUE, TRUE, TRUE, TRUE, FALSE);

-- 初始化用户配置文件
INSERT INTO "UAA_USER_PROFILES" ("ID", "USER_ID", "MOBILE", "NAME", "EMAIL")
VALUES (1, 1, '12345678901', 'Admin User', 'admin@example.com');
INSERT INTO "UAA_USER_PROFILES" ("ID", "USER_ID", "MOBILE", "NAME", "EMAIL")
VALUES (2, 2, '10987654321', 'Employee User', 'employee@example.com');

-- 用户与用户组的映射
INSERT INTO "UAA_USERS_GROUPS" ("USER_ID", "GROUP_ID") VALUES (1, 1); -- admin -> Admin Group
INSERT INTO "UAA_USERS_GROUPS" ("USER_ID", "GROUP_ID") VALUES (2, 2); -- employee -> Employee Group

-- 初始化 OAuth2 客户端
INSERT INTO "UAA_CLIENTS" ("ID", "CLIENT_ID", "CLIENT_SECRET", "CLIENT_NAME", "AUTHORIZATION_GRANT_TYPES", "CLIENT_AUTHENTICATION_METHODS", "REDIRECT_URIS", "SCOPES", "CLIENT_SETTINGS", "TOKEN_SETTINGS")
VALUES (1, 'ios_client', 'ios_secret', 'iOS Application', 'authorization_code,refresh_token', 'client_secret_basic', 'https://ios.example.com/callback', 'read,write', '{}', '{}');
INSERT INTO "UAA_CLIENTS" ("ID", "CLIENT_ID", "CLIENT_SECRET", "CLIENT_NAME", "AUTHORIZATION_GRANT_TYPES", "CLIENT_AUTHENTICATION_METHODS", "REDIRECT_URIS", "SCOPES", "CLIENT_SETTINGS", "TOKEN_SETTINGS")
VALUES (2, 'android_client', 'android_secret', 'Android Application', 'authorization_code,refresh_token', 'client_secret_basic', 'https://android.example.com/callback', 'read,write', '{}', '{}');
INSERT INTO "UAA_CLIENTS" ("ID", "CLIENT_ID", "CLIENT_SECRET", "CLIENT_NAME", "AUTHORIZATION_GRANT_TYPES", "CLIENT_AUTHENTICATION_METHODS", "REDIRECT_URIS", "SCOPES", "CLIENT_SETTINGS", "TOKEN_SETTINGS")
VALUES (3, 'web_client', 'web_secret', 'Web Application', 'authorization_code,refresh_token', 'client_secret_basic', 'https://web.example.com/callback', 'read,write', '{}', '{}');

SET REFERENTIAL_INTEGRITY TRUE;
